<wiki:toc max_depth="3" />
= SageTV for Plex Media Server (and Roku Too!) =

== Requirements ==
*Plex Media Server (PMS) 0.9.5 or newer installed on one computer:*
  * OS X: [http://www.plexapp.com/download/mac-download-new.php download] [http://wiki.plexapp.com/index.php/PlexNine_PMS_Installation#Installation_-_Mac_OS_X installation instructions]
  * Windows: [http://www.plexapp.com/download/win-download-new.php download] [http://wiki.plexapp.com/index.php/PlexNine_PMS_Installation#Installation_-_Windows installation instructions]
  * Linux: [http://www.plexapp.com/linux/linux-pms-download.php download] (installation instructions are located on the download page); see also [http://forums.plexapp.com/index.php/topic/34063-0952-for-linux-distros/ various Linux distros].

*Be sure you're installing _Plex Media Server_ and NOT Plex Media Center* You can install the Plex Media Center software on Mac and PCs if you want to use them as Plex clients with access to SageTV recordings but the Plex Media Server must be installed first.

*SageTV server software* 
  * v7.1.9 installed (no longer available for download)
*SageTV sagex-services plugin*
  * installed (this will also install the Jetty Web Server if it's not already installed) 
*SageTV Customer Scanner (for Plex Media Server)*
  * custom code downloaded and installed from this project site
*SageTV BMT Agent (for Plex Media Server)*
  * custom code downloaded and installed from this project site
*plex.js file for SageTV server*
  * custom code downloaded and installed from this project site 
  
== Optional == 
  * Roku Box with Plex Channel installed
  * Plex Media Center installed Windows or OS X

== Introduction==

This document will not cover specific steps on how to install the SageTV Server or the Plex Media Server. It is also assumed that the user is somewhat familiar with the [http:// Plex Media Manager] (browser-based access to the Plex media library / database).

== Installation ==
=== Installing sagex-services plugin for SageTV Server ===

[http://code.google.com/p/customsagetv/wiki/SageTVapi sagex-services] is SageTV plugin that allows remote access to the SageTV API for developers that wish to access various aspects of the SageTV server. This plug-in must be installed on your SageTV server.

  # Open SageTV Placeshifter, turn on an Extender or open the SageTV UI on the server 
  # Go to the SageTV Plugin Manager by following the menus to Setup -> SageTV Plugins -> All Available Plugins
  # From the General tab, scroll to "sagex-services - SageTV Remote API Services" and select it.
  # Install the plugin, and restart SageTV server when prompted. *Note: this will also install the Jetty Web Server.*
Optional: configure the user name, password, and port for the Jetty Web Server (by default, they are respectively: sage frey and 8080)
  # Open SageTV Placeshifter, turn on an Extender or open the SageTV UI on the server 
  # Go to the SageTV Plugin Manager by following the menus to Setup -> SageTV Plugins -> Installed Plugins
  # From the General tab, scroll to the Jetty Web Server plugin and select it. An options dialog is displayed
  # Choose Configure Plugin. A screen with the plugin's configuration settings is displayed
  # Update the user name, password, and port as you like. Be sure to select "Restart Web Server" when you're done. *Please note: SSL connections are not currently supported in  the SageTV for Boxee app*
  # Make a note of the user name, password and port since these will be used to configure the SageTV for Boxee app
Note: the Jetty Web Server is installed as a part of installing the sagex-services plugin but will not be used by Plex Media Server. See: [http://tools.assembla.com/sageplugins/wiki/Jetty Jetty Web Server plugin wiki] for complete information.

=== Installing the SageTV Custom Code for Plex Media Server ===

*Part 1*

  # Download the [http://code.google.com/p/sagetv-for-plexmediacenter/downloads/list sagetv-for-plexmediacenter.zip] file
  # Find where your Plex Media Server main folder is:
    * OS X: ~/Library/Application Support/Plex Media Server
    * Windows 7: C:\Users\_your_user_name_\AppData\Local\Plex Media Server
    * Vista: C:\Documents and Settings\_your_user_name_\Application Data\Plex Media Server
    * Linux ???
  # Unzip the zip file, targeting the top level Plex folder from above.
  
The following folder/files will be installed:
{{{
Scanner
--Series
----simplejson
------files
----SageTVScanner.py
Plug-ins
--BMTAgent.bundle
----Contents
------Code
--------__init__.py
--------BMTAgent.properties
------Resources (stuff)
------Info.plist
------VERSION
}}} 

*Part 2*

Install the plex.js file on the SageTV server:

  # Download the [http://code.google.com/p/sagetv-for-plexmediacenter/downloads/list sagex.zip] file
  # Unzip the zip file into SageTV\SageTV\sagex\services
  # plex.js should be listed 

== Configuration ==

Two files in the Plex Media Server  will need to be updated with the location of the SageTV server:

  # Plug-ins\BMTAgent.bundle\Contents\Code\BMTAgent.properties
  # Scanners\Series\SageTV Scanner.py

Update each with the correct IP address:

BMTAgent.properties, update the SAGEX_HOST line:
  * SAGEX_HOST=http://user:pass@IPAddress:PortNo
    e.g. http://sage:frey@192.168.1.12:8080

SageTV Scanner.py, update the SAGEX_HOST line:
  * SAGEX_HOST = 'http://user:pass@IPAdress:PortNo'
    e.g. 'http://sage:frey@192.168.1.12:8080'

    NOTE: *in the second file, single quotes are needed*

== Setup and Scanning ==

Once all the files have been installed, the Plex Media Manager is used to add a new "section"

  # Using your browser, navigate to the Plex Media Manager page
    e.g. http://PlexMediaServerIPAddress:PortNo/manage/index.html
  # Click on "TV Shows"

  # Enter the "Name:" you want the Section/Entry to show up as in Plex, e.g. Recorded TV Shows
  # Browse to and select your SageTV recordings folder(s) via the Add button for the "Media folders:" -- alternately you can manually enter the folder path using the "Manual Entry" button.

  # Click on "Advanced" in order to select the custom scanner (SageTV Scanner) and metadata agent (SageTV BMT Agent)  for SageTV.

[two pix]

  # Multiple SageTV recording folders can be added to a single section

  # And finally, click on "Add Section"

Plex will immediately start scanning the SageTV recordings folder(s); reload the page in order to see the "spinner" indicating the scan status:

[pic]
  
Depending on the number of files it may take an hour or longer for all the files to be scanned and 


== Not Currently Supported ==

  * Movie scanning is not yet supported but should be available in an upcoming release

== Troubleshooting ==